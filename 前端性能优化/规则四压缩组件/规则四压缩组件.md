# 性能优化之四压缩
## 压缩是如何工作的
Web 客户端可以通过 HTTP 请求中的 Accept-Encoding 头来表示对压缩的支持；如果 Web 服务器看到这个请求中有这个头，就会使用客户端列出来的方法中的一种来压缩响应，Web服务器通过响应中的 Contenet-Encoding 头来通知 Web 客户端。  
gzip是目前最流行和最有效的压缩方法

## 压缩什么
### 压缩的内容
包括： XML 和 JSON 在内的任何文本响应！

### 压缩的成本
* 服务器端会花费额外的 CPU 周期来完成压缩
* 客户端要对压缩文件进行解压缩   


要检测收益是否大于开销需要考虑的点：  

* 响应的大小
* 连接的带宽和客户端与服务器之间的 Internet 距离  

根据经验： 通常对大于 1KB 或 2KB 的文件进行压缩

## 压缩带来的收益
压缩通常能将响应的数据量减少 70%；

##　配置
配置 gzip 时使用的模块取决于 Apache 的版本

* Apache 1.3 使用 mod_gzip
* Apache 2.x 使用 mod_deflate

## 代理缓存
